<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Poemas para Lilian Cu√©llar ‚Äî D√≠a 30</title>

    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Inter:wght@400;600;700&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --rose: #ff5a7a;
            --ink: #1d1d1f;
            --bg: #fff7f9;
            --card: #fff;
            --muted: #6b7280
        }

        body {
            margin: 0;
            font-family: Inter, system-ui;
            color: var(--ink);
            background: radial-gradient(90vmax 60vmax at 85% -10%, #ffd9e1 0%, transparent 60%),
                radial-gradient(80vmax 60vmax at -10% 0%, #ffe7ee 0%, transparent 55%),
                var(--bg)
        }

        header {
            text-align: center;
            padding: 3.5rem 1rem 2rem
        }

        .brand {
            font-family: "Great Vibes", cursive;
            font-size: 3rem;
            color: var(--rose)
        }

        .tag {
            color: var(--muted)
        }

        .wrap {
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 1rem 4rem
        }

        .grid {
            display: grid;
            gap: 1.25rem
        }

        @media(min-width:900px) {
            .grid {
                grid-template-columns: 1.4fr .8fr
            }
        }

        .card {
            background: var(--card);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(255, 90, 122, .18);
            padding: 1.25rem
        }

        .card.soft {
            box-shadow: 0 8px 24px rgba(0, 0, 0, .06)
        }

        .poem-title {
            font-family: "Great Vibes";
            font-size: 2.2rem;
            color: var(--rose)
        }

        .poem-meta {
            color: var(--muted);
            font-size: .9rem
        }

        .poem-body {
            white-space: pre-wrap;
            line-height: 1.8;
            font-size: 1.05rem
        }

        .divider {
            height: 1px;
            background: linear-gradient(90deg, transparent, #ffd1db, transparent);
            margin: 1rem 0
        }

        details {
            border: 1px dashed #ffd1db;
            border-radius: 14px;
            padding: .8rem 1rem;
            background: white
        }

        summary {
            cursor: pointer
        }

        .poem-date {
            color: var(--muted);
            font-size: .85rem
        }

        .countdown {
            display: flex;
            gap: .6rem;
            flex-wrap: wrap;
            margin-top: .75rem
        }

        .cd-item {
            min-width: 75px;
            text-align: center;
            background: #fff0f4;
            padding: .6rem .8rem;
            border-radius: 14px
        }

        .cd-item .num {
            font-weight: 700;
            font-size: 1.4rem
        }

        .cd-item .lbl {
            font-size: .75rem;
            color: #b22a4b
        }

        .foot {
            margin-top: 2rem;
            text-align: center;
            color: var(--muted);
            font-size: .9rem
        }
    </style>
</head>

<body>
    <header>
        <div class="brand" id="brand">Poemas para Lilian Cu√©llar</div>
        <div class="tag">Una poes√≠a nueva cada d√≠a 30 ‚ú®</div>
    </header>

    <main class="wrap grid">
        <section class="card">
            <h2>Poes√≠a del mes</h2>
            <h1 class="poem-title" id="poemTitle">Cargando‚Ä¶</h1>
            <div class="poem-meta" id="poemMeta">‚Äî</div>
            <div class="poem-body" id="poemBody"></div>
            <div class="divider"></div>

            <h3>Archivo de poes√≠as</h3>
            <input id="q" type="text" placeholder="Buscar‚Ä¶" style="width:100%;margin:.5rem 0;padding:.5rem" />
            <div id="archive" class="row"></div>
        </section>

        <aside class="card soft">
            <h2>Pr√≥xima publicaci√≥n</h2>
            <div id="nextDate" class="poem-meta">‚Äî</div>
            <div class="countdown" id="countdown"></div>
            <div class="foot">Hecho con ‚ù§ para Lilian</div>
        </aside>
    </main>

    <script>
        // üî• Aqu√≠ est√° tu JSON quemado üî•
        const DATA = {
            nombre: "Lilian Cu√©llar",
            poemas: [
                {
                    "title": "Te quiero",
                    "date": "2025-08-31",
                    "body": "Lilian,\nte quiero no solo en los d√≠as claros,\nsino tambi√©n en las horas grises.\n\nTe quiero porque tu risa me abre caminos,\ny tu silencio me guarda en paz.\n\nTe quiero en lo simple y lo profundo,\nen el abrazo que calma,\ny en la palabra que sostiene.\n\nTe quiero porque contigo\nla vida es m√°s vida,\ny el amor, m√°s verdadero.",
                    "visible": "auto"
                }
            ]
        };

        // ---------- utilidades de fecha ----------
        const fmt = d => new Intl.DateTimeFormat('es-SV', { dateStyle: 'long' }).format(d);
        function lastDayOfMonth(y, m) { return new Date(y, m + 1, 0).getDate() }
        function day30OrLast(y, m) { return Math.min(30, lastDayOfMonth(y, m)) }
        function nextReleaseDate(base = new Date()) {
            const y = base.getFullYear(), m = base.getMonth();
            const d = day30OrLast(y, m);
            if (base.getDate() < d) return new Date(y, m, d);
            const ny = m === 11 ? y + 1 : y, nm = (m + 1) % 12;
            return new Date(ny, nm, day30OrLast(ny, nm));
        }

        // ---------- render portada ----------
        const poemTitle = document.getElementById("poemTitle");
        const poemMeta = document.getElementById("poemMeta");
        const poemBody = document.getElementById("poemBody");
        const archive = document.getElementById("archive");
        const q = document.getElementById("q");

        function visibles(list) {
            const now = new Date();
            return list.filter(p => p.visible !== "borrador" && new Date(p.date) <= now)
                .sort((a, b) => new Date(b.date) - new Date(a.date));
        }


        function renderCurrent() {
            const list = visibles(DATA.poemas);
            if (!list.length) { poemTitle.textContent = "A√∫n sin publicar"; poemMeta.textContent = "‚Äî"; poemBody.textContent = ""; return }
            const p = list[0];
            poemTitle.textContent = p.title;
            function parseLocalDate(str) {
                const [y, m, d] = str.split("-").map(Number);
                return new Date(y, m - 1, d); // crea fecha local (no UTC)
            }

            poemMeta.textContent = `Publicada el ${fmt(parseLocalDate(p.date))}`;
            poemBody.textContent = p.body;
        }

        function renderArchive(filter = "") {
            const list = [...DATA.poemas].sort((a, b) => new Date(b.date) - new Date(a.date));
            const qf = filter.trim().toLowerCase();
            const filtered = qf ? list.filter(p => (p.title + p.body).toLowerCase().includes(qf)) : list;
            archive.innerHTML = "";
            if (!filtered.length) { archive.innerHTML = "<p>No hay poemas.</p>"; return }
            filtered.forEach(p => {
                const el = document.createElement("details");
                el.innerHTML = `<summary><strong>${p.title}</strong> 
          <span class="poem-date">‚Äî ${fmt(new Date(p.date))}${p.visible === "borrador" ? " ¬∑ borrador" : ""}</span></summary>
          <div class="divider"></div>
          <div class="poem-body">${(p.body || "").replace(/\n/g, "<br>")}</div>`;
                archive.appendChild(el);
            });
        }

        q.addEventListener("keydown", e => { if (e.key === "Enter") { e.preventDefault(); renderArchive(q.value) } });

        // ---------- countdown ----------
        function renderCountdown() {
            const d = nextReleaseDate();
            document.getElementById("nextDate").textContent = fmt(d);
            function tick() {
                const now = new Date(), diff = Math.max(0, d - now), s = Math.floor(diff / 1000);
                const days = Math.floor(s / 86400), hrs = Math.floor((s % 86400) / 3600),
                    min = Math.floor((s % 3600) / 60), sec = s % 60;
                document.getElementById("countdown").innerHTML =
                    `<div class="cd-item"><div class="num">${days}</div><div class="lbl">d√≠as</div></div>
           <div class="cd-item"><div class="num">${hrs}</div><div class="lbl">horas</div></div>
           <div class="cd-item"><div class="num">${min}</div><div class="lbl">min</div></div>
           <div class="cd-item"><div class="num">${sec}</div><div class="lbl">seg</div></div>`;
            }
            tick(); clearInterval(window._cd); window._cd = setInterval(tick, 1000);
        }

        // ---------- init ----------
        renderCurrent();
        renderArchive();
        renderCountdown();
    </script>
</body>

</html>